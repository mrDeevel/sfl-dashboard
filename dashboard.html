<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>SFL Dashboard</title>
  <link href="https://fonts.googleapis.com/css2?family=Titillium+Web:wght@400;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="styles/dashboard.css" />
  <link href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <style>
    .ticker {
      background: #1565c0;
      color: white;
      overflow: hidden;
      white-space: nowrap;
      padding: 8px 0;
      font-size: 1.2rem;
      font-weight: bold;
      border-bottom: 2px solid #0d47a1;
      width: 100%;
      z-index: 1000;
    }

    .ticker-content {
      display: inline-block;
      animation: scroll 15s linear infinite;
    }

    @keyframes scroll {
      from {
        transform: translateX(100%);
      }
      to {
        transform: translateX(-100%);
      }
    }
  </style>
</head>
<body>
  <!-- Sidenav Trigger -->
  <a href="#" data-target="slide-out" class="sidenav-trigger" style="position:absolute;top:24px;left:24px;">
    <i class="material-icons">menu</i>
  </a>

  <!-- Materialize Sidenav -->
  <ul id="slide-out" class="sidenav">
    <li>
      <div class="user-view">
        <div class="background" style="background: #1976d2;">
          <img src="assets/sfl-logo.png" alt="SFL Logo" style="max-width: 80px; margin: 16px auto; display: block; background: white; border-radius: 50%;">
        </div>
        <a href="#user"><img class="circle" id="side-avatar" src="assets/sfl-logo.png"></a>
        <a href="#name"><span class="white-text name" id="side-team-name">Team</span></a>
      </div>
    </li>
    <li><a href="dashboard.html"><i class="material-icons">dashboard</i>Dashboard</a></li>
    <li><a href="#draft-progress-section" onclick="loadDraftProgress()"><i class="material-icons">flag</i>Draft Progress</a></li>
    <li><a href="#!"><i class="material-icons">assignment</i>Reports</a></li>
    <li><a href="#!"><i class="material-icons">settings</i>Settings</a></li>

    <!-- Manager section inserted here when enabled -->
    <li id="manager-section-divider" style="display:none;"><div class="divider"></div></li>
    <div id="manager-section" style="display:none;"></div>

    <li><div class="divider"></div></li>
    <li><a href="#!" onclick="logoutSFL()"><i class="material-icons">logout</i>Logout</a></li>
  </ul>

  <!-- Welcome banner with team avatar and name -->
  <section class="welcome-banner" style="justify-content:center;">
    <img id="team-avatar" src="assets/avatars/default.png" alt="Team avatar" class="avatar" />
    <h2 id="welcome-message">Welcome Team</h2>
  </section>

  <!-- Draft Progress Section -->
  <section id="draft-progress-section" style="display: none;">
    <h4>Draft Progress</h4>
    <div id="draft-summary-tiers">
      <div class="draft-summary-row">
        <div class="draft-summary-league" data-league="A">
          <div class="draft-summary-bar">
            <div class="draft-summary-bar-inner" style="width:50%;"></div>
          </div>
          <div class="draft-summary-league-label">A</div>
          <div class="draft-summary-league-count">96/192</div>
        </div>
        <!-- Repeat for other leagues -->
      </div>
    </div>
  </section>

  <!-- Draft Picks Modal -->
  <div id="draft-picks-modal" class="modal">
    <div class="modal-content">
      <h4 id="modal-league-title"></h4>
      <ul id="modal-draft-picks" class="collection"></ul>
    </div>
    <div class="modal-footer">
      <button class="modal-close btn waves-effect waves-light">Close</button>
    </div>
  </div>

  <!-- Manager Login Modal -->
  <div id="manager-code-modal" class="modal">
    <div class="modal-content">
      <h5>Manager Login</h5>
      <p>Enter manager code:</p>
      <input id="managerCodeInput" type="password" class="validate" autocomplete="off" />
      <span id="managerCodeError" style="color:red;display:none;">Incorrect code. Try again.</span>
    </div>
    <div class="modal-footer">
      <a href="#!" id="managerCodeSubmit" class="modal-close waves-effect waves-green btn-flat">Submit</a>
    </div>
  </div>

  <!-- Headline Ticker -->
  <div id="headline-ticker" class="ticker">
    <div class="ticker-content">
      <!-- Ticker updates will appear here -->
    </div>
  </div>

  <script src="scripts/dashboard.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      var elems = document.querySelectorAll('.sidenav');
      M.Sidenav.init(elems);

      // Show Draft Progress section only when menu item is clicked
      document.querySelector('a[href="#draft-progress-section"]').addEventListener('click', function(e) {
        e.preventDefault();
        document.getElementById('draft-progress-section').style.display = 'block';
        // Optionally hide other sections here
        var sidenav = document.querySelector('.sidenav');
        var instance = M.Sidenav.getInstance(sidenav);
        if (instance) instance.close();
        // Render draft progress if needed
        if (typeof renderDraftProgress === "function") renderDraftProgress();
      });
    });

    function logoutSFL() {
      localStorage.clear();
      window.location.href = "index.html";
    }
  </script>
</body>
</html>